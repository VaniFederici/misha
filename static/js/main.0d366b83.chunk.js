(this.webpackJsonpmisha=this.webpackJsonpmisha||[]).push([[0],{36:function(e,t,a){},37:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var c=a(1),i=a(2),n=a.n(i),s=a(29),r=a.n(s),o=(a(36),a(8)),l=a(5),d=a(3),j=a(18),m=n.a.createContext(),b=function(e){var t=e.children,a=Object(i.useState)([]),n=Object(d.a)(a,2),s=n[0],r=n[1],o=Object(i.useState)(0),l=Object(d.a)(o,2),b=l[0],u=l[1],h=Object(i.useState)(0),O=Object(d.a)(h,2),x=O[0],f=O[1];Object(i.useEffect)((function(){var e=localStorage.getItem("pedido"),t=localStorage.getItem("cantidadItemsPedido"),a=localStorage.getItem("montoTotalPedido");e&&r(JSON.parse(e)),t&&u(parseInt(t)),a&&f(parseInt(a))}),[]);var g=function(){var e=0,t=0;s.forEach((function(a){e+=a.cantidad,t+=a.cantidad*a.item.precio})),u(e),localStorage.setItem("cantidadItemsPedido",e),f(t),localStorage.setItem("montoTotalPedido",t)};return Object(c.jsx)(m.Provider,{value:{pedido:s,cantidadItemsPedido:b,montoTotalPedido:x,eliminarItem:function(e){var t=s,a=t.findIndex((function(t){return t.item.id===e}));t.splice(a,1),r(Object(j.a)(t)),localStorage.setItem("pedido",JSON.stringify(Object(j.a)(t))),g()},agregarItem:function(e,t){var a={item:e,cantidad:t},c=s.findIndex((function(e){return e.item.id===a.item.id}));-1===c?s.push(a):s[c].cantidad+=a.cantidad,r(Object(j.a)(s)),localStorage.setItem("pedido",JSON.stringify(Object(j.a)(s))),g()},limpiarPedido:function(){r([]),localStorage.setItem("pedido",JSON.stringify([])),u(0),localStorage.setItem("cantidadItemsPedido",0),f(0),localStorage.setItem("montoTotalPedido",0)}},children:t})},u=(a(37),function(){var e=Object(i.useContext)(m);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("svg",{className:"bi bi-cart4 cart-icon",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{d:"M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"})}),0!==e.cantidadItemsPedido&&Object(c.jsx)("span",{className:"cart-icon-count",children:e.cantidadItemsPedido})]})}),h=a(23),O=(a(38),h.a.initializeApp({apiKey:"AIzaSyBK1-uG72VMpPbaWFLjxENjHuGq0_EDR-g",authDomain:"coderhouse-react-pfinal.firebaseapp.com",projectId:"coderhouse-react-pfinal",storageBucket:"coderhouse-react-pfinal.appspot.com",messagingSenderId:"117881363786",appId:"1:117881363786:web:79b442d278de362c0ff5b3"})),x=function(){return h.a.firestore(O)},f=x().collection("Categorias"),g=function(){return f.get()},v=function(e){return f.where("key","==",e).get()},p=a(26),N=function(e){return e.docs.map((function(e){return Object(p.a)({id:e.id},e.data())}))},w=function(e){return Object(p.a)({id:e.id},e.data())},z=function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(i.useEffect)((function(){g().then((function(e){var t=N(e);n(t)}))}),[]),Object(c.jsxs)("nav",{className:"navbar navbar-dark bg-dark",children:[Object(c.jsx)(o.b,{to:"/",children:Object(c.jsx)("img",{src:"/misha/images/logo.png",width:"100",height:"60",className:"d-inline-block align-top",alt:"",loading:"lazy"})}),Object(c.jsx)(o.b,{to:"/carrito",children:Object(c.jsx)(u,{})}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(c.jsx)("ul",{className:"navbar-nav",children:a.map((function(e){return Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(o.c,{to:"/categoria/".concat(e.key),activeClassName:"active",className:"nav-link","data-toggle":"collapse","data-target":"#navbarNav",children:e.nombre})},e.id)}))})})]})},S=x().collection("Productos"),I=function(){return S.get()},y=function(e){return S.doc(e).get()},k=function(e){return S.where("categoria_id","==",e).get()},C=(a(45),function(e){var t=e.item;return Object(c.jsx)(o.b,{to:"/producto/".concat(t.id),className:"router-link",children:Object(c.jsxs)("div",{className:"card item-card",children:[Object(c.jsx)("img",{src:"/misha"+t.imagen,className:"card-img-top",alt:t.nombre}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("h5",{className:"card-title",children:t.nombre}),Object(c.jsx)("p",{className:"card-text",children:t.descripcion}),Object(c.jsxs)("p",{className:"card-text precio",children:["$",t.precio]})]})]})})}),H=(a(46),function(){return Object(c.jsx)("div",{className:"loading-container",children:Object(c.jsxs)("svg",{width:"2em",height:"2em",viewBox:"0 0 16 16",className:"bi bi-arrow-repeat",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[Object(c.jsx)("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),Object(c.jsx)("path",{fillRule:"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})]})})}),A=(a(47),function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(i.useEffect)((function(){I().then((function(e){var t=N(e);n(t)}))}),[]),a.length?Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-4 row-cols-xl-5 item-list-row",children:a.map((function(e,t){return Object(c.jsx)(C,{item:e},t)}))})}):Object(c.jsx)(H,{})}),P=(a(48),function(e){e.children,e.greeting;return Object(c.jsxs)("div",{className:"home",children:[Object(c.jsxs)("div",{className:"home-main-image-container",style:{background:'url("'.concat("/misha",'/images/main.jpg") no-repeat left'),backgroundSize:"cover"},children:[Object(c.jsx)("img",{src:"/misha/images/logo-2.png",className:"home-main-logo",alt:"main image"}),Object(c.jsx)("img",{src:"/misha/images/arrow.png",className:"home-main-arrow",alt:"arrow image"})]}),Object(c.jsx)(A,{})]})}),M=(a(49),function(e){var t=Object(i.useState)(e.initial),a=Object(d.a)(t,2),n=a[0],s=a[1];return Object(c.jsx)("div",{className:"item-count",children:Object(c.jsx)("div",{className:"item-count-window",children:Object(c.jsxs)("div",{className:"item-count-counter-container",children:[Object(c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-cart-dash-fill item-count-button-small",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:function(){n>e.min&&(s(n-1),e.onAdd(n-1))},children:Object(c.jsx)("path",{fillRule:"evenodd",d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM4 14a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm7 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM6.5 7a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4z"})}),Object(c.jsx)("span",{className:"item-count-counter",children:n}),Object(c.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-cart-plus-fill item-count-button-small",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",onClick:function(){n<e.max&&(s(n+1),e.onAdd(n+1))},children:Object(c.jsx)("path",{fillRule:"evenodd",d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zM4 14a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm7 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"})})]})})})}),E=(a(50),function(e){var t=e.item,a=Object(i.useState)(1),n=Object(d.a)(a,2),s=n[0],r=n[1],o=Object(i.useContext)(m),j=Object(l.f)();return Object(c.jsx)("div",{className:"card mb-3 item-detail-card",children:Object(c.jsxs)("div",{className:"row no-gutters",children:[Object(c.jsx)("div",{className:"col-md-4",children:Object(c.jsx)("img",{src:"/misha"+t.imagen,className:"card-img item-detail-image",alt:t.nombre})}),Object(c.jsx)("div",{className:"col-md-8",children:Object(c.jsxs)("div",{className:"card-body item-detail-card-description",children:[Object(c.jsxs)("div",{className:"item-detail-card-description-body",children:[Object(c.jsx)("h5",{className:"card-title item-detail-name",children:t.nombre}),Object(c.jsx)("p",{className:"card-text item-detail-info",children:t.descripcion}),Object(c.jsxs)("p",{className:"card-text item-detail-precio",children:["$",t.precio]})]}),Object(c.jsxs)("div",{className:"item-detail-card-description-footer",children:[Object(c.jsx)(M,{initial:1,min:1,max:t.stock,onAdd:function(e){r(e)}}),Object(c.jsxs)("button",{className:"item-detail-button-comprar",onClick:function(){o.agregarItem(t,s),j.push("/carrito")},children:["Agregar ",s]})]})]})})]})})}),V=(a(51),function(){var e=Object(l.g)().id,t=Object(i.useState)({}),a=Object(d.a)(t,2),n=a[0],s=a[1],r=Object(i.useState)(!1),o=Object(d.a)(r,2),j=o[0],m=o[1];return Object(i.useEffect)((function(){y(e).then((function(e){if(e.exists){var t=w(e);s(t)}else m(!0)}))}),[]),n&&n.id?Object(c.jsx)(E,{item:n}):j?Object(c.jsx)("div",{className:"item-detail-not-found",children:"Producto no encontrado"}):Object(c.jsx)(H,{})}),F=(a(52),function(e){var t=e.item,a=t.item,n=t.cantidad,s=Object(i.useContext)(m);return Object(c.jsxs)("div",{className:"cart-item-container",children:[Object(c.jsx)("div",{children:Object(c.jsx)("img",{src:"/misha"+a.imagen,className:"cart-item-img",alt:a.nombre})}),Object(c.jsxs)("div",{className:"cart-item-description",children:[Object(c.jsx)("div",{className:"cart-item-name",children:a.nombre}),Object(c.jsx)("div",{children:a.descripcion}),Object(c.jsxs)("div",{children:["Precio unitario:"," ",Object(c.jsxs)("span",{className:"cart-item-precio",children:["$",a.precio]})," - cantidad:"," ",Object(c.jsx)("span",{className:"cart-item-precio",children:n})," - total:"," ",Object(c.jsxs)("span",{className:"cart-item-precio",children:["$",n*a.precio]})]})]}),Object(c.jsx)("div",{children:Object(c.jsx)("svg",{onClick:function(){s.eliminarItem(a.id)},width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-trash-fill cart-item-eliminar",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:Object(c.jsx)("path",{fillRule:"evenodd",d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"})})})]})}),T=(a(53),function(){var e=Object(i.useContext)(m),t=Object(l.f)();return 0===e.pedido.length?Object(c.jsx)("div",{className:"cart-empty",children:"El carrito esta vac\xedo"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:"cart-list",children:e.pedido.map((function(e,t){return Object(c.jsx)(F,{item:e},t)}))}),Object(c.jsxs)("div",{className:"cart-finalize-container",children:[Object(c.jsxs)("div",{className:"cart-total",children:["TOTAL: $",e.montoTotalPedido]}),Object(c.jsx)("div",{className:"cart-finalize",children:Object(c.jsx)("button",{className:"cart-finalize-button",onClick:function(){t.push("/checkout")},children:"Comprar"})})]})]})}),B=(a(54),function(){var e=Object(i.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],s=Object(i.useState)(!1),r=Object(d.a)(s,2),o=r[0],j=r[1],m=Object(i.useState)({}),b=Object(d.a)(m,2),u=b[0],h=b[1],O=Object(i.useState)(!1),x=Object(d.a)(O,2),f=x[0],g=x[1],p=Object(l.g)().key;Object(i.useEffect)((function(){g(!1),n([]),w()}),[p]),Object(i.useEffect)((function(){w()}),[]);var w=function(){j(!0),v(p).then((function(e){if(0!==e.size){var t=N(e);z(t[0].id),h(t[0])}else j(!1),g(!0)}))},z=function(e){k(parseInt(e)).then((function(e){var t=N(e);n(t),j(!1)}))};return a.length?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:"category-list-image-container",style:{background:'url("'.concat("/misha"+u.imagen,'") no-repeat center'),backgroundSize:"cover"},children:[Object(c.jsx)("div",{className:"category-list-text",children:u.nombre}),Object(c.jsx)("img",{src:"/misha/images/arrow.png",className:"category-list-arrow",alt:"arrow image"})]}),Object(c.jsx)("div",{className:"container-fluid",children:Object(c.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-4 row-cols-xl-5 category-list-row",children:a.map((function(e,t){return Object(c.jsx)(C,{item:e},t)}))})})]}):o?Object(c.jsx)(H,{}):f?Object(c.jsx)("div",{className:"category-list-not-found",children:"Categor\xeda no encontrada"}):Object(c.jsx)(c.Fragment,{children:" "})}),D=(a(55),function(e){var t=Object(i.useState)(""),a=Object(d.a)(t,2),n=a[0],s=a[1],r=Object(i.useState)(""),o=Object(d.a)(r,2),l=o[0],j=o[1],m=Object(i.useState)(""),b=Object(d.a)(m,2),u=b[0],h=b[1],O=Object(i.useState)(""),x=Object(d.a)(O,2),f=x[0],g=x[1],v=Object(i.useState)(""),p=Object(d.a)(v,2),N=p[0],w=p[1],z=function(){var t={name:n,phone:l,email:u};e.onSuccess(t)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{className:"customer-form-title",children:"Ingrese sus datos para finalizar el pedido"}),Object(c.jsxs)("div",{className:"container-fluid customer-form",children:[Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("label",{htmlFor:"name",className:"form-label",children:"Nombre y Apellido"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"name",value:n,onChange:function(e){s(e.target.value)}})]}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("label",{htmlFor:"phone",className:"form-label",children:"Tel\xe9fono"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"phone",value:l,onChange:function(e){j(e.target.value)}})]}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("label",{htmlFor:"email",className:"form-label",children:"E-mail"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"email",value:u,onChange:function(e){h(e.target.value)}})]}),Object(c.jsxs)("div",{className:"col-12",children:[Object(c.jsx)("label",{htmlFor:"email2",className:"form-label",children:"Repetir e-mail"}),Object(c.jsx)("input",{type:"text",className:"form-control",id:"email2",value:f,onChange:function(e){g(e.target.value)}})]}),Object(c.jsxs)("div",{className:"col-12 text-right",children:[Object(c.jsx)("div",{className:"customer-form-error",children:N}),Object(c.jsx)("button",{className:"customer-form-button",onClick:function(){""!==n.trim()?""!==l.trim()?""!==u.trim()?/^[a-zA-Z0-9._]+[a-zA-Z0-9]+@[a-zA-Z0-9]+\.[a-zA-Z]{2,4}$/.test(u)?u.trim()===f.trim()?(w(""),z()):w("  Los email son diferentes"):w("Debe ingresar un e-mail v\xe1lido"):w("Debe ingresar un e-mail"):w("Debe ingresar un tel\xe9fono"):w("Debe ingresar un nombre y apellido")},children:"Finalizar Compra"})]})]})]})}),L=x().collection("Pedidos"),J=function(e){return L.add(e)},R=(a(56),function(){var e=Object(i.useContext)(m),t=Object(l.f)(),a=Object(i.useState)(1),n=Object(d.a)(a,2),s=n[0],r=n[1],o=Object(i.useState)(!1),j=Object(d.a)(o,2),b=j[0],u=j[1],h=Object(i.useState)(""),O=Object(d.a)(h,2),x=O[0],f=O[1],g=Object(i.useState)(""),v=Object(d.a)(g,2),p=v[0],N=v[1];Object(i.useEffect)((function(){0===e.cantidadItemsPedido&&t.push("/")}),[]);return b?Object(c.jsx)(H,{}):1===s?Object(c.jsx)("div",{children:Object(c.jsx)(D,{onSuccess:function(t){var a={cliente:t,total:e.montoTotalPedido,pedido:e.pedido,estado:"Generado",fecha:new Date};u(!0),J(a).then((function(t){N("Compra realizada exitosamente!"),f(t.id),r(2),e.limpiarPedido()})).catch((function(e){N("Ocurri\xf3 un error procesando su pedido, intente nuevamente mas tarde")})).finally((function(){u(!1)}))}})}):Object(c.jsxs)("div",{className:"checkout-container",children:[Object(c.jsx)("h1",{className:"checkout-title",children:p}),""===x?"":Object(c.jsxs)("div",{className:"checkout-pedido",children:["Codigo de Pedido:"," ",Object(c.jsx)("span",{className:"checkout-codigo",children:x})]})]})}),$=function(){return Object(c.jsx)(b,{children:Object(c.jsxs)(o.a,{basename:"/misha/",children:[Object(c.jsx)(z,{}),Object(c.jsxs)(l.c,{children:[Object(c.jsx)(l.a,{exact:!0,path:"/",children:Object(c.jsx)(P,{})}),Object(c.jsx)(l.a,{path:"/producto/:id",children:Object(c.jsx)(V,{})}),Object(c.jsx)(l.a,{path:"/categoria/:key",children:Object(c.jsx)(B,{})}),Object(c.jsx)(l.a,{path:"/carrito",children:Object(c.jsx)(T,{})}),Object(c.jsx)(l.a,{path:"/checkout",children:Object(c.jsx)(R,{})})]})]})})};a(57),a(28),a(58);r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.0d366b83.chunk.js.map